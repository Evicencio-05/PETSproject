<!DOCTYPE html>
<html lang="en" xml:lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>PETS</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
        <header>
            <div class="user">
                <a href="" alt="Profile page">
                    <img class="user-image" src="/res/IMG_1508.JPG" alt="Marley :)">
                </a>
                <ul>
                    <li><h3>Marley</h3></li>
                    <li>company</li>
                    <li>occupation</li>
                </ul>
            </div>
            <nav class="header-nav">
                <a class="grow" href="#">Patients</a>
                <a class="grow" href="#">Placeholder</a>
                <a class="grow" href="#">Placeholder</a>
                <a class="grow" href="#">Placeholder</a>
                <button>Login</button>
            </nav>
        </header>
        <main>
            <div class="patient-list">
                <div id="am-list" class="card-title-container">
                    <h4>MORNING</h4>
                    <div class="card-list">
                        <div class="card">
                            <h4>Mary Jane</h4>
                            <button>
                                <textarea name="diagnosis" class="diagnosis" readonly title="Click to enlarge.">test 1
                                </textarea>
                            </button>
                            <button><img class="patientFormImage" src="/res/IMG_1508.JPG" alt="placeholder"></button>
                            <button><img class="patientFormImage" src="/res/IMG_1508.JPG" alt="placeholder"></button>
                            <button><img class="patientFormImage" src="/res/IMG_1508.JPG" alt="placeholder"></button>
                        </div>
                        <div class="card">
                            <h4>Mary Jane</h4>
                            <button>
                                <textarea name="diagnosis" class="diagnosis" readonly title="Click to enlarge.">test 2
                                </textarea>
                            </button>
                            <button><img class="patientFormImage" src="/res/IMG_1508.JPG" alt="placeholder"></button>
                            <button><img class="patientFormImage" src="/res/IMG_1508.JPG" alt="placeholder"></button>
                        </div>
                    </div>
                </div>
                <hr>
                <div id="pm-list" class="card-title-container">
                    <h4>AFTERNOON</h4>
                    <div class="card-list">
                        <div class="card">
                            <h4>Mary Jane</h4>
                            <button>
                                <textarea name="diagnosis" class="diagnosis" readonly title="Click to enlarge.">test 3
                                </textarea>
                            </button>
                            <button><img class="patientFormImage" src="/res/IMG_1508.JPG" alt="placeholder"></button>
                            <button><img class="patientFormImage" src="/res/IMG_1508.JPG" alt="placeholder"></button>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <div id="overlayBlur"></div>

        <div id="popupBox">
            <span id="closeButton">&times;</span>
            <p id="popupText"></p>
            <img id="popupImage" src="" alt="" style="display: none">
        </div>

        <script>
            const diagnosis = document.getElementsByClassName('diagnosis');
            const patientFormButton = document.querySelectorAll('button:has(.patientFormImage)');
            const popupBox = document.getElementById('popupBox');
            const closeButton = document.getElementById('closeButton');
            const popupText = document.getElementById('popupText');
            const popupImage = document.getElementById('popupImage');
            const overlayBlur = document.getElementById('overlayBlur');

            for (let i = 0; i < diagnosis.length; i++) {
                diagnosis[i].addEventListener('click', function() {
                    popupImage.style.display = 'none';
                    popupText.textContent = this.value;
                    popupText.style.display = 'block'
                    popupBox.style.display = 'block';
                    overlayBlur.style.display = 'block';
                });
            }

            for (let i = 0; i < patientFormButton.length; i++) {
                patientFormButton[i].addEventListener('click', function(e) {
                    e.preventDefault();
                    const img = this.querySelector('.patientFormImage');
                    popupImage.src = img.src;
                    popupImage.alt = img.alt;
                    popupImage.style.display = 'block';
                    popupText.style.display = 'none'
                    popupBox.style.display = 'block';
                    overlayBlur.style.display = 'block';
                });
            }

            function closePopup() {
                popupBox.style.display = 'none';
                overlayBlur.style.display = 'none';
            }

            closeButton.addEventListener('click', closePopup);
            overlayBlur.addEventListener('click', closePopup);

            console.log(diagnosis, popupBox,closeButton, popupText, overlayBlur)
        </script>
    </body>
</html>